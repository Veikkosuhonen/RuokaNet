{% extends "layout.html" %}
{% block title %}{{ shop[1] }}{% endblock %}
{% block header %}{{ shop[1] }}{% endblock %}
{% block content %}
    <p>Products: </p>
    {% for product in products %}
        <p>{{ product[1] }}: {{ product[2] }}, {{ product[3] }} in stock</p>
        {% if isowner %}
            <form action="/products/{{ product[0] }}" method="POST">
                Change price: <input type="number", name="newprice"> <input type="submit" value="submit">
            </form>
            <form action="/shops/{{ shop[0] }}/produce/{{ product[0] }}" method="POST">
                <input type="submit" value="produce">
            </form>
        {% elif session.username %}
            <form action="/shops/{{ shop[0] }}/buy/{{ product[0] }}" method="POST">
                <input type="submit" value="buy">
            </form>
        {% endif %}
    {% endfor %}
    <hr>
    {% if isowner %}
    <p>Add a new product</p><br>
    <form action="/shops/{{ shop[0] }}/addproduct" method="POST">
        <p>Item</p><br>
        {% for item in items %}
        {{ item[1] }} <input type="radio" name="itemid" value="{{ item[0] }}"><br>
        {% endfor %}
        <p>Price</p><br>
        <input type="number" name="price">
        <input type="submit" value="add">
    </form>
    <hr>
    <p>Invite users</p><br>
    <form action="/shops/{{ shop[0] }}/inviteuser" method="POST">
        <input type="text" name="receivername">
        <input type="submit" value="invite">
    </form>
    <p>Leave this shop</p>
    <form action="/shops/{{ shop[0] }}/leave" method="POST">
        <input type="submit" value="Leave">
    </form>
    {% endif %}

    <p>Owners: </p>
    {% for owner in owners %}
    <a href="/users/{{ owner[1] }}">{{ owner[1] }}</a>
    {% endfor %}
{% endblock %}